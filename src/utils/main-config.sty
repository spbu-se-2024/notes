%
%  __________________________________________________________________________
% /\                                                                         \
% \_|              _  _ ____ _ _  _    _    ____ ___ ____ _  _               |
%   |              |\/| |__| | |\ |    |    |__|  |  |___  \/                |
%   |              |  | |  | | | \|    |___ |  |  |  |___ _/\_               |
%   |                                                                        |
%   |       ____ ____ _  _ ____ _ ____ _  _ ____ ____ ___ _ ____ _  _        |
%   |       |    |  | |\ | |___ | | __ |  | |__/ |__|  |  | |  | |\ |        |
%   |       |___ |__| | \| |    | |__] |__| |  \ |  |  |  | |__| | \|        |
%   |                                                                        |
%   |   _____________________________________________________________________|_
%    \_/_______________________________________________________________________/
%



\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{main-config}


%==============================================================================%
%                                                                              %
%          Encoding & Fonts & Hyphenation & Justification & Ligatures          %
%                                                                              %
%==============================================================================%

\RequirePackage[T1, T2A]{fontenc}
\RequirePackage[utf8]{inputenc}
\RequirePackage[english, russian]{babel}
\RequirePackage{microtype}
\DisableLigatures[f]{encoding=*, family=*}


%==============================================================================%
%                                                                              %
%                              Margins & Leading                               %
%                                                                              %
%==============================================================================%

\RequirePackage[%
    a4paper,%
    hmargin=20mm,%
    bindingoffset=0mm,%
    vmargin={30mm, 35mm},%
    head=15mm, foot=20mm%
]{geometry}
\RequirePackage[onehalfspacing]{setspace}


%==============================================================================%
%                                                                              %
%                             General Style Tools                              %
%                                                                              %
%==============================================================================%

% Underline - TikZ

\usepackage{tikz}

\newcommand{\udot}[1]{%
    \tikz[baseline=(todotted.base)]{%
        \node[inner sep=1pt,outer sep=0pt] (todotted) {#1};%
        \draw[dotted] (todotted.south west) -- (todotted.south east);%
    }%
}

\newcommand{\udensdot}[1]{%
    \tikz[baseline=(todotted.base)]{%
        \node[inner sep=1pt,outer sep=0pt] (todotted) {#1};%
        \draw[densely dotted] (todotted.south west) -- (todotted.south east);%
    }%
}

\newcommand{\uloosdot}[1]{%
    \tikz[baseline=(todotted.base)]{%
        \node[inner sep=1pt,outer sep=0pt] (todotted) {#1};%
        \draw[loosely dotted] (todotted.south west) -- (todotted.south east);%
    }%
}

\newcommand{\udash}[1]{%
    \tikz[baseline=(todotted.base)]{%
        \node[inner sep=1pt,outer sep=0pt] (todotted) {#1};%
        \draw[dashed] (todotted.south west) -- (todotted.south east);%
    }%
}

\newcommand{\udensdash}[1]{%
    \tikz[baseline=(todotted.base)]{%
        \node[inner sep=1pt,outer sep=0pt] (todotted) {#1};%
        \draw[densely dashed] (todotted.south west) -- (todotted.south east);%
    }%
}

\newcommand{\uloosdash}[1]{%
    \tikz[baseline=(todotted.base)]{%
        \node[inner sep=1pt,outer sep=0pt] (todotted) {#1};%
        \draw[loosely dashed] (todotted.south west) -- (todotted.south east);%
    }%
}


%==============================================================================%
%                                                                              %
%                                 Book Design                                  %
%                                                                              %
%==============================================================================%

\RequirePackage{import}

\RequirePackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\leftmark}
\fancyhead[R]{\nouppercase{\rightmark}}
\fancyfoot[C]{\Large{\thepage}}
\renewcommand{\headrulewidth}{1.5pt}
\renewcommand{\footrulewidth}{1pt}
\renewcommand{\footruleskip}{5mm}

\fancypagestyle{plain}{%
    \fancyhf{}%
    \fancyfoot[C]{\Large{\thepage}}%
    \renewcommand{\headrulewidth}{0pt}%
    \renewcommand{\footrulewidth}{1pt}%
    \renewcommand{\footruleskip}{5mm}%
}

\RequirePackage[bottom]{footmisc}

\RequirePackage[colorlinks=true]{hyperref}

\RequirePackage{indentfirst}


%==============================================================================%
%                                                                              %
%                                 Mathematics                                  %
%                                                                              %
%==============================================================================%

\RequirePackage[fleqn]{amsmath}
\RequirePackage{amssymb, amsfonts}
\RequirePackage{mathtools}
\RequirePackage{bm, bbm}


%==============================================================================%
%                                                                              %
%                               Math Enviroments                               %
%                                                                              %
%==============================================================================%

% TODO : Avoid pagebreak inside enviroments

\RequirePackage[thmmarks, thref, hyperref]{ntheorem}


\newtheoremstyle{general-style}%
{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont ##1\ ##2\theorem@separator}\hbox{\strut}}}]}%
{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont ##1\ ##2\ (##3)\theorem@separator}\hbox{\strut}}}]}

\newtheoremstyle{nonumbergeneral-style}%
{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont ##1\theorem@separator}\hbox{\strut}}}\hspace{1.5em}]}%
{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont ##1\ (##3)\theorem@separator}\hbox{\strut}}}\hspace{1.5em}]}

\newtheoremstyle{short-style}%
{\item[\hskip\labelsep \theorem@headerfont ##1\ ##2\theorem@separator]}%
{\item[\hskip\labelsep \theorem@headerfont ##1\ ##2\ (##3)\theorem@separator]}

\newtheoremstyle{nonumbershort-style}%
{\item[\hskip\labelsep \theorem@headerfont ##1\theorem@separator]}%
{\item[\hskip\labelsep \theorem@headerfont ##1\ (##3)\theorem@separator]}

\newcommand*{\definiendum}[1]{$\bm{\textbf{#1}}$}


% Assign Styles

% General Style
\theoremstyle{general-style}
\theoremheaderfont{\kern-0.5cm\normalfont\smallskip\bfseries}\theorembodyfont{\normalfont}
\theoremindent=0.5cm

\theoremseparator{:}\theoremsymbol{}
\theorempreskip{\topsep\smallskip}
\newtheorem{theorem}{Теорема}[section]
\newtheorem{lemma}[theorem]{Лемма}
\newtheorem{proposition}[theorem]{Предложение}
\newtheorem{corolary}{Следствие}[theorem]

\newtheorem{definition}[theorem]{Определение}

\newtheorem{examples}[theorem]{Примеры}
\newtheorem{example}[theorem]{Пример}

\newtheorem{remark}[theorem]{Замечание}
\newtheorem{designation}[theorem]{Обозначение}

\theoremseparator{.}\theoremsymbol{\flushright\ensuremath{\Box}}
\theorempreskip{\topsep}
\newtheorem*{proof}{Доказательство}

% Short Style
\theoremstyle{short-style}
\theoremheaderfont{\normalfont\smallskip\bfseries}\theorembodyfont{\normalfont}
\theoremindent=0cm

\theoremseparator{:}\theoremsymbol{}
\theorempreskip{\topsep\smallskip}
\newtheorem{sh-theorem}{Теорема}[section]
\newtheorem{sh-lemma}[theorem]{Лемма}
\newtheorem{sh-proposition}[theorem]{Предложение}
\newtheorem{sh-corolary}{Следствие}[theorem]

\newtheorem{sh-definition}[theorem]{Определение}

\newtheorem{sh-examples}[theorem]{Примеры}
\newtheorem{sh-example}[theorem]{Пример}

\newtheorem{sh-remark}[theorem]{Замечание}
\newtheorem{sh-designation}[theorem]{Обозначение}

\theoremseparator{.}\theoremsymbol{\ensuremath{\Box}}
\theorempreskip{\topsep}
\newtheorem*{sh-proof}{Доказательство}


%==============================================================================%
%                                                                              %
%                           Lists & Tables & Figures                           %
%                                                                              %
%==============================================================================%

\RequirePackage{paralist}
% \RequirePackage{enumitem}
\RequirePackage{graphicx}



\endinput